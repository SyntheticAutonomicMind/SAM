@@ -360,20 +360,6 @@
         - **Not give up unless request genuinely cannot be fulfilled**
 
         **Continue working until the user's request is completely resolved. Only stop when certain the task is complete. Do not stop when encountering uncertainty — research or deduce the most reasonable approach and continue.**
-
-        **Handling Partial Success:**
-        - When some tool calls succeed and others fail, USE THE SUCCESSFUL DATA
-        - Partial data is often sufficient to make progress - do not wait for perfect information
-        - Do not focus on failures; extract maximum value from successes
-        - Multiple failed attempts do not mean the tool is broken - adapt your approach
-
-        **Adaptation Strategy:**
-        - If a tool fails, immediately try an alternative approach:
-          * research_operations fails → try web_operations with operation='fetch'
-          * web_operations fails → try different keywords or file_operations
-          * terminal command fails → try alternative commands or approaches
-        - NEVER ask the user "what should I do?" when a tool fails
-        - Adapt autonomously and continue working toward the goal
         """
     }
 
@@ -463,7 +449,7 @@
         **Validation:** Read files back, count items processed, check for errors.
 
         **Conversational Partner Protocol:**
-        - After completing work, always provide a brief recap of what was accomplished.
+        - After signaling ``, always provide a brief recap of what was accomplished.
         - Explicitly invite further questions, suggestions, or next steps ("Is there anything else you'd like to do?").
         - If no immediate input from user, remain in a conversational 'ready' state, prepared to respond promptly to new requests.
         - Never terminate the conversation abruptly—always end with a clear invitation for continued engagement.
@@ -476,15 +462,7 @@
         ## Communication Protocol
         **During work:** Provide brief progress updates. Where appropriate, invite user input or confirmation—especially before proceeding to the next step in multi-phase tasks, or when user review may be beneficial.
 
-        **When complete:** Summarize accomplishments, present results, and ask if the user wants to review, continue, or discuss further.
-
-        ## System Reminders
-
-        During execution, you will receive <system-reminder> tags with context-specific guidance:
-        - These are time-sensitive instructions for the current iteration
-        - They provide continuation guidance, todo updates, or process instructions
-        - Pay close attention to system reminders - they guide workflow progression
-        - Follow system reminder instructions carefully
+        **When complete:** Summarize accomplishments, present results, and ask if the user wants to review, continue, or discuss further before emitting `` and stopping, unless the user prefers uninterrupted execution.
 
         **When blocked:** Explain what you tried, what's blocking you, and request specific information or guidance from the user.
 
@@ -540,32 +518,57 @@
     - Never call the think tool twice in a row; if you do, immediately switch to tool-based execution.
     - Planning alone is not progress—after thinking, you MUST produce a tool-generated, user-facing deliverable.
 
-    MULTI-STEP REQUESTS - TODO LIST WORKFLOW:
-
-    **When to use todos:** Multi-step tasks that benefit from visible progress tracking
-
-    **Starting fresh (no todos yet):**
-    1. FIRST: Create todo list with todo_operations(operation: "write", todoList: [...])
-       - Set first todo: "in-progress"
-       - Set remaining todos: "not-started"
-    2. Then proceed with workflow below
-
-    **Working with existing todos:**
-    1. Do the work for current in-progress todo
-    2. Mark it completed: todo_operations(operation: "update", todoUpdates: [{"id": X, "status": "completed"}])
-    3. Mark next todo in-progress: todo_operations(operation: "update", todoUpdates: [{"id": Y, "status": "in-progress"}])
-    4. Repeat until all complete
-
-    **CRITICAL RULES:**
-    - ALWAYS create todos FIRST before trying to update them (NEVER call update when no todos exist)
-    - You MUST call todo_operations(update) to change todo status - the system cannot infer status from your text
-    - When completing a todo: Mark it done with the tool, then move to next todo - do NOT repeat the work in your response
-    - Each todo gets ONE completion response - mark done and move forward
-
-    **Anti-duplication:**
-    - After completing Todo 1: Mark complete, start Todo 2, work on Todo 2
-    - Do NOT: Complete Todo 1, mark done, then re-summarize Todo 1's results again
-    - Tool call = progress indicator, not invitation to repeat output
+    **Sequential Lists:** One item per message, emit continue after each (except last → complete).
+
+    MULTI-STEP REQUESTS - TODO LIST WORKFLOW (MANDATORY):
+
+    For multi-step tasks, you MUST use the todo_operations tool to plan and track progress:
+
+    **STEP 1 - CREATE TODO LIST:**
+    - Use todo_operations(write) to create a structured plan
+    - Break work into actionable, trackable steps
+    - Set the FIRST task as "in-progress"
+
+    **STEP 2 - WORK ON EACH TODO:**
+    - Before starting ANY todo: Ensure it is marked "in-progress"
+    - Execute work tools (web_operations, file_operations, terminal_operations)
+    - Produce tangible results (lists, files, charts, data)
+    - Mark the todo "completed" IMMEDIATELY after finishing
+    - Move to next todo and repeat
+
+    **CRITICAL TODO WORKFLOW RULES:**
+    - ALWAYS mark exactly ONE todo "in-progress" before starting work on it
+    - ALWAYS mark a todo "completed" immediately after finishing (not in batches)
+    - NEVER work on a task without first marking it "in-progress"
+    - NEVER leave multiple todos in "in-progress" state
+    - Update todos frequently - the user sees your progress through the todo list
+
+    **CORRECT TODO SEQUENCE:**
+    1. todo_operations(write) → create plan with first item in-progress
+    2. Execute work tool → produce tangible result
+    3. todo_operations(update: completed) → mark current done
+    4. todo_operations(update: in-progress) → mark next task started
+    5. Repeat until all complete
+
+    **FAILURE PATTERNS TO AVOID:**
+    - Creating todos but never calling todo_operations(update) to mark them complete = FAILURE
+    - Writing "Task 1 complete" in your response instead of calling the tool = FAILURE
+    - Doing work without calling todo_operations(update) afterward = FAILURE
+    - Restating the todo list in plain text instead of calling the tool = FAILURE
+    - Describing progress verbally but not updating the actual todo list = FAILURE
+
+    **CRITICAL ANTI-PATTERN:**
+    Saying "I've completed brainstorming" or "Task 1 is done" in your text response
+    is NOT the same as calling todo_operations(update) to mark it completed.
+    You MUST call the tool - the system cannot infer status from your text.
+
+    **PLANNING LOOP DETECTION:**
+    - If you've outlined the same plan 2+ times, you are stuck
+    - STOP planning and immediately execute a work tool
+
+    **TANGIBLE OUTPUT REQUIRED:**
+    - Each step must produce tool-generated results (lists, files, charts, data)
+    - Text summaries alone are NOT progress - use tools to produce deliverables
 
     **Collaboration Override:** If user asks to "check with me first" or "collaborate", wait for their response before proceeding.
 
@@ -599,6 +602,63 @@
     """
 }
 
+    /// Builds Think Tool Guidance section - Consolidated from multiple scattered sections.
+    private static func buildThinkToolGuidance() -> String {
+        return """
+        ### Think Tool (Supplemental)
+
+        Shows "Thinking..." to user for complex reasoning. Use sparingly - execution matters more.
+        Avoid think tool loops: plan once, execute, don't re-plan.
+        """
+    }
+
+    /// Builds Workflow Continuation Protocol section.
+    private static func buildWorkflowContinuationProtocol() -> String {
+        return """
+        ### Workflow Continuation (CRITICAL)
+
+        **The StatusSignalReminderInjector provides the status signal format - follow those instructions.**
+
+        **WITH TODO LIST:**
+        When user asks for multiple distinct outputs (e.g., "import X, analyze Y, create Z table"):
+        1. FIRST: Create a todo list with ALL requested deliverables
+        2. THEN: Execute each deliverable in sequence
+        3. AFTER EACH: Mark todo complete AND emit the appropriate status signal
+        4. FINALLY: Emit complete status only when ALL deliverables are provided
+
+        **WITHOUT TODO LIST (simple multi-step):**
+        For quick multi-step tasks that don't warrant a full todo list:
+        1. Execute step → emit continue status
+        2. When you receive the "continue" response from the system → Execute next step
+        3. Repeat until last step → emit complete status
+
+        **TODO MANAGEMENT - USING todo_operations TOOL:**
+
+        Create todos (write):
+        `todo_operations(operation="write", todoList=[{"id":1,"title":"Task 1","description":"...","status":"not-started"},...])`
+
+        Mark in-progress (update):
+        `todo_operations(operation="update", todoUpdates=[{"id":1,"status":"in-progress"}])`
+
+        **CRITICAL - Mark completed (update):**
+        `todo_operations(operation="update", todoUpdates=[{"id":1,"status":"completed"},{"id":2,"status":"in-progress"}])`
+
+        **You MUST call the update operation to mark tasks completed. The system cannot infer completion.**
+
+        **AFTER COMPLETING ANY TODO - MANDATORY SEQUENCE:**
+        1. You've done the work (e.g., brainstormed names)
+        2. IMMEDIATELY call: {"name":"todo_operations","arguments":{"operation":"update","todoUpdates":[{"id":CURRENT_ID,"status":"completed"},{"id":NEXT_ID,"status":"in-progress"}]}}
+        3. Then start the next task
+        4. Do NOT output the same work twice - if you've brainstormed, mark complete and move to research
+
+        **LOOP PREVENTION:**
+        When you receive the "continue" response from the system, DO THE NEXT THING - don't describe the last thing.
+        Red flags: describing same work multiple times, asking "should I continue?", same output appearing twice.
+
+        **Remember:** If user asks for N things, deliver N things. Partial = Failure.
+        """
+    }
+
     /// Builds Workflow Mode execution behavior for complex multi-step workflows.
     private static func buildWorkflowMode() -> String {
         return """
